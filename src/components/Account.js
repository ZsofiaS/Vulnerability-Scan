import React, { useState, useEffect, useRef } from 'react';
import '../styles/App.css';
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import { faUser } from '@fortawesome/free-solid-svg-icons';

const Account = (props) => {

  const [hidden, setHidden] = useState(true);
  const myRef = useRef();

  const detectClickOutside = e => {
    if (!myRef.current.contains(e.target)) {
      setHidden(true);
    };
  };

  const toggleHide = () => {
    setHidden(!hidden);
  };

  useEffect(() => {
        document.addEventListener('mousedown', detectClickOutside);
        return () => document.removeEventListener('mousedown', detectClickOutside);
    });

  return (
    <div className='accountContainer' ref={myRef}>
        <FontAwesomeIcon
          icon={faUser}
          size='lg'
          color='white'
          onClick={toggleHide}
        />
      { !hidden && (
        <div className='accountDropdown'>
          <p className='account'>Name: {props.name}</p>
          <p className='account'>Email: {props.email}</p>
        </div>
      )}
    </div>
  );
};

export default Account;
