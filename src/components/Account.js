import React, { useState, useEffect, useRef } from 'react';
import './Account.css';
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import { faUser } from '@fortawesome/free-solid-svg-icons';

const Account = (props) => {

  const [hidden, setHidden] = useState(true);
  const myRef = useRef();

  const handleClickOutside = e => {
    if (!myRef.current.contains(e.target)) {
      setHidden(true);
    }
  }

  useEffect(() => {
        document.addEventListener('mousedown', handleClickOutside);
        return () => document.removeEventListener('mousedown', handleClickOutside);
    });

  return (
    <div className='accountContainer' ref={myRef}>
        <FontAwesomeIcon
          icon={faUser}
          size='lg'
          color='white'
          onClick={() => setHidden(!hidden)}
        />
      { !hidden && (
        <div className='accountDropdown'>
          <p>{props.name}</p>
          <p>{props.email}</p>
        </div>
      )}
    </div>
  )
}

export default Account;
